system.require("_bitmap")
system.require("_animation")
system.require("_imagegadget")
system.require("_event")
system.require("_textbox")

local img;
local anim;

function main()

	-- create an _animation starting at 30, terminating at 150
	-- and lasting 1.3 seconds (1300ms)
	anim = _animation( 30 , 150 , 1300 );

	-- we want it to use a special easing function
	anim.easing = "back:easeOut";

	-- tell it which function to call every frame
	anim.onSet( setter );

	-- create a red _bitmap
	local bmp = _bitmap( 10 , 10 );
	bmp.reset( system.rgb( 31 , 0 , 0 ) );

	-- create an _imagegadget, that we want to animate
	img = _imagegadget( 120 , 30 , bmp );

	system.addChild( img );
	
	img.registerEventHandler( "keyClick" , handler );

end

function handler( event )
	if event.keyCode == 1 then
		--Key A!
		if anim.runs then
			anim.pause()
		else
			anim.start()
		end
	elseif event.keyCode == 2 then
		--Key B!
		anim.terminate();
	end
end

function setter( value )
	-- Set y-Coordinate of our little red square
	img.y = value;
end